'use client'\n\nimport React, { useState } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { numerologyCalculator, NumerologyResults } from '@/lib/numerology/calculator'\nimport { cn } from '@/lib/utils'\nimport { \n  CalculatorIcon,\n  StarIcon,\n  HeartIcon,\n  UserIcon,\n  CalendarIcon,\n  SparklesIcon\n} from 'lucide-react'\n\ninterface NumerologyCalculatorProps {\n  className?: string\n}\n\nexport function NumerologyCalculator({ className }: NumerologyCalculatorProps) {\n  const [fullName, setFullName] = useState('')\n  const [birthDate, setBirthDate] = useState('')\n  const [results, setResults] = useState<NumerologyResults | null>(null)\n  const [isCalculating, setIsCalculating] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const handleCalculate = async () => {\n    if (!fullName.trim() || !birthDate) {\n      setError('Please enter both your full name and birth date')\n      return\n    }\n\n    setIsCalculating(true)\n    setError(null)\n\n    try {\n      const date = new Date(birthDate)\n      if (isNaN(date.getTime())) {\n        throw new Error('Invalid birth date')\n      }\n\n      const numerologyResults = numerologyCalculator.calculateNumerology({\n        fullName: fullName.trim(),\n        birthDate: date\n      })\n\n      setResults(numerologyResults)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Calculation failed')\n    } finally {\n      setIsCalculating(false)\n    }\n  }\n\n  const resetCalculation = () => {\n    setResults(null)\n    setFullName('')\n    setBirthDate('')\n    setError(null)\n  }\n\n  const getNumberColor = (number: number) => {\n    if (number === 11 || number === 22 || number === 33) {\n      return 'text-purple-600 font-bold' // Master numbers\n    }\n    return 'text-blue-600'\n  }\n\n  const getNumberBadgeVariant = (number: number) => {\n    if (number === 11 || number === 22 || number === 33) {\n      return 'default' // Master numbers\n    }\n    return 'secondary'\n  }\n\n  if (results) {\n    return (\n      <div className={cn('space-y-6', className)}>\n        {/* Header */}\n        <Card className=\"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20\">\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"flex items-center space-x-2\">\n                <CalculatorIcon className=\"h-6 w-6 text-blue-600\" />\n                <span>Your Numerology Profile</span>\n              </CardTitle>\n              <Button variant=\"outline\" onClick={resetCalculation}>\n                New Calculation\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-center space-y-2\">\n              <p className=\"text-lg font-semibold\">{fullName}</p>\n              <p className=\"text-muted-foreground\">\n                Born: {new Date(birthDate).toLocaleDateString()}\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Core Numbers */}\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {/* Life Path Number */}\n          <Card className=\"text-center\">\n            <CardHeader>\n              <div className=\"mx-auto w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mb-2\">\n                <span className={cn('text-2xl font-bold', getNumberColor(results.lifePathNumber))}>\n                  {results.lifePathNumber}\n                </span>\n              </div>\n              <CardTitle className=\"text-lg\">Life Path Number</CardTitle>\n              <Badge variant={getNumberBadgeVariant(results.lifePathNumber)} className=\"mx-auto\">\n                {results.lifePathNumber === 11 || results.lifePathNumber === 22 || results.lifePathNumber === 33 ? 'Master Number' : 'Core Number'}\n              </Badge>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-muted-foreground\">\n                {results.interpretation.lifePath}\n              </p>\n            </CardContent>\n          </Card>\n\n          {/* Destiny Number */}\n          <Card className=\"text-center\">\n            <CardHeader>\n              <div className=\"mx-auto w-16 h-16 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center mb-2\">\n                <span className={cn('text-2xl font-bold', getNumberColor(results.destinyNumber))}>\n                  {results.destinyNumber}\n                </span>\n              </div>\n              <CardTitle className=\"text-lg\">Destiny Number</CardTitle>\n              <Badge variant={getNumberBadgeVariant(results.destinyNumber)} className=\"mx-auto\">\n                Life Purpose\n              </Badge>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-muted-foreground\">\n                {results.interpretation.destiny}\n              </p>\n            </CardContent>\n          </Card>\n\n          {/* Soul Urge Number */}\n          <Card className=\"text-center\">\n            <CardHeader>\n              <div className=\"mx-auto w-16 h-16 bg-pink-100 dark:bg-pink-900 rounded-full flex items-center justify-center mb-2\">\n                <span className={cn('text-2xl font-bold', getNumberColor(results.soulUrgeNumber))}>\n                  {results.soulUrgeNumber}\n                </span>\n              </div>\n              <CardTitle className=\"text-lg\">Soul Urge Number</CardTitle>\n              <Badge variant={getNumberBadgeVariant(results.soulUrgeNumber)} className=\"mx-auto\">\n                Heart's Desire\n              </Badge>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-muted-foreground\">\n                {results.interpretation.soulUrge}\n              </p>\n            </CardContent>\n          </Card>\n\n          {/* Personality Number */}\n          <Card className=\"text-center\">\n            <CardHeader>\n              <div className=\"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-2\">\n                <span className={cn('text-2xl font-bold', getNumberColor(results.personalityNumber))}>\n                  {results.personalityNumber}\n                </span>\n              </div>\n              <CardTitle className=\"text-lg\">Personality Number</CardTitle>\n              <Badge variant={getNumberBadgeVariant(results.personalityNumber)} className=\"mx-auto\">\n                Outer Self\n              </Badge>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-muted-foreground\">\n                {results.interpretation.personality}\n              </p>\n            </CardContent>\n          </Card>\n\n          {/* Birth Day Number */}\n          <Card className=\"text-center\">\n            <CardHeader>\n              <div className=\"mx-auto w-16 h-16 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center mb-2\">\n                <span className={cn('text-2xl font-bold', getNumberColor(results.birthDayNumber))}>\n                  {results.birthDayNumber}\n                </span>\n              </div>\n              <CardTitle className=\"text-lg\">Birth Day Number</CardTitle>\n              <Badge variant={getNumberBadgeVariant(results.birthDayNumber)} className=\"mx-auto\">\n                Special Talent\n              </Badge>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-muted-foreground\">\n                Your special gift and natural talent that supports your life path.\n              </p>\n            </CardContent>\n          </Card>\n\n          {/* Personal Year */}\n          <Card className=\"text-center\">\n            <CardHeader>\n              <div className=\"mx-auto w-16 h-16 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center mb-2\">\n                <span className={cn('text-2xl font-bold', getNumberColor(results.personalYear))}>\n                  {results.personalYear}\n                </span>\n              </div>\n              <CardTitle className=\"text-lg\">Personal Year</CardTitle>\n              <Badge variant={getNumberBadgeVariant(results.personalYear)} className=\"mx-auto\">\n                {new Date().getFullYear()} Energy\n              </Badge>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-muted-foreground\">\n                The energy and themes that will influence your {new Date().getFullYear()} journey.\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Detailed Analysis */}\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {/* Strengths */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2 text-green-600\">\n                <StarIcon className=\"h-5 w-5\" />\n                <span>Your Strengths</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-2\">\n                {results.interpretation.strengths.map((strength, index) => (\n                  <div key={index} className=\"flex items-center space-x-2\">\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full\" />\n                    <span className=\"text-sm\">{strength}</span>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Challenges */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2 text-orange-600\">\n                <SparklesIcon className=\"h-5 w-5\" />\n                <span>Growth Areas</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-2\">\n                {results.interpretation.challenges.map((challenge, index) => (\n                  <div key={index} className=\"flex items-center space-x-2\">\n                    <div className=\"w-2 h-2 bg-orange-500 rounded-full\" />\n                    <span className=\"text-sm\">{challenge}</span>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Lucky Numbers */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center space-x-2\">\n              <StarIcon className=\"h-5 w-5 text-yellow-600\" />\n              <span>Your Lucky Numbers</span>\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex flex-wrap gap-3 justify-center\">\n              {results.interpretation.luckyNumbers.map((number, index) => (\n                <div key={index} className=\"w-12 h-12 bg-yellow-100 dark:bg-yellow-900 rounded-full flex items-center justify-center\">\n                  <span className=\"font-bold text-yellow-700 dark:text-yellow-300\">{number}</span>\n                </div>\n              ))}\n            </div>\n            <p className=\"text-sm text-muted-foreground text-center mt-4\">\n              These numbers carry special significance in your numerological profile and may bring you luck.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  return (\n    <div className={cn('space-y-6', className)}>\n      {/* Header */}\n      <Card className=\"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center space-x-2\">\n            <CalculatorIcon className=\"h-6 w-6 text-blue-600\" />\n            <span>Numerology Calculator</span>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-muted-foreground\">\n            Discover your life path, destiny, and soul purpose through the ancient wisdom of numbers.\n          </p>\n        </CardContent>\n      </Card>\n\n      {/* Input Form */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Enter Your Information</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {/* Full Name */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"fullName\" className=\"flex items-center space-x-2\">\n              <UserIcon className=\"h-4 w-4\" />\n              <span>Full Name (as on birth certificate)</span>\n            </Label>\n            <Input\n              id=\"fullName\"\n              value={fullName}\n              onChange={(e) => setFullName(e.target.value)}\n              placeholder=\"Enter your complete birth name\"\n              className=\"text-lg\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              Use your full birth name for the most accurate reading\n            </p>\n          </div>\n\n          {/* Birth Date */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"birthDate\" className=\"flex items-center space-x-2\">\n              <CalendarIcon className=\"h-4 w-4\" />\n              <span>Birth Date</span>\n            </Label>\n            <Input\n              id=\"birthDate\"\n              type=\"date\"\n              value={birthDate}\n              onChange={(e) => setBirthDate(e.target.value)}\n              className=\"text-lg\"\n            />\n          </div>\n\n          {/* Error Display */}\n          {error && (\n            <div className=\"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\n              <p className=\"text-red-700 dark:text-red-300 text-sm\">{error}</p>\n            </div>\n          )}\n\n          {/* Calculate Button */}\n          <Button\n            onClick={handleCalculate}\n            disabled={isCalculating || !fullName.trim() || !birthDate}\n            className=\"w-full\"\n            size=\"lg\"\n          >\n            {isCalculating ? (\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                <span>Calculating...</span>\n              </div>\n            ) : (\n              <div className=\"flex items-center space-x-2\">\n                <CalculatorIcon className=\"h-5 w-5\" />\n                <span>Calculate My Numbers</span>\n              </div>\n            )}\n          </Button>\n        </CardContent>\n      </Card>\n\n      {/* About Numerology */}\n      <Card>\n        <CardHeader>\n          <CardTitle>About Numerology</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <p className=\"text-muted-foreground\">\n            Numerology is the ancient study of numbers and their mystical relationship to life events. \n            By analyzing the numbers in your name and birth date, we can reveal insights about your \n            personality, life purpose, and spiritual path.\n          </p>\n          \n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <div>\n              <h4 className=\"font-semibold mb-2\">Core Numbers</h4>\n              <ul className=\"text-sm text-muted-foreground space-y-1\">\n                <li>• <strong>Life Path:</strong> Your life's journey and lessons</li>\n                <li>• <strong>Destiny:</strong> Your life's purpose and mission</li>\n                <li>• <strong>Soul Urge:</strong> Your heart's deepest desires</li>\n              </ul>\n            </div>\n            \n            <div>\n              <h4 className=\"font-semibold mb-2\">Master Numbers</h4>\n              <ul className=\"text-sm text-muted-foreground space-y-1\">\n                <li>• <strong>11:</strong> Intuitive illumination</li>\n                <li>• <strong>22:</strong> Master builder</li>\n                <li>• <strong>33:</strong> Master teacher</li>\n              </ul>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}"