/**\n * Numerology Calculator\n * Calculate life path numbers, destiny numbers, and other numerological values\n */\n\nexport interface NumerologyData {\n  fullName: string\n  birthDate: Date\n}\n\nexport interface NumerologyResults {\n  lifePathNumber: number\n  destinyNumber: number\n  soulUrgeNumber: number\n  personalityNumber: number\n  birthDayNumber: number\n  personalYear: number\n  interpretation: {\n    lifePath: string\n    destiny: string\n    soulUrge: string\n    personality: string\n    strengths: string[]\n    challenges: string[]\n    luckyNumbers: number[]\n  }\n}\n\n/**\n * Numerology Calculator Class\n */\nexport class NumerologyCalculator {\n  private static instance: NumerologyCalculator\n\n  public static getInstance(): NumerologyCalculator {\n    if (!NumerologyCalculator.instance) {\n      NumerologyCalculator.instance = new NumerologyCalculator()\n    }\n    return NumerologyCalculator.instance\n  }\n\n  /**\n   * Calculate complete numerology profile\n   */\n  public calculateNumerology(data: NumerologyData): NumerologyResults {\n    const lifePathNumber = this.calculateLifePathNumber(data.birthDate)\n    const destinyNumber = this.calculateDestinyNumber(data.fullName)\n    const soulUrgeNumber = this.calculateSoulUrgeNumber(data.fullName)\n    const personalityNumber = this.calculatePersonalityNumber(data.fullName)\n    const birthDayNumber = this.calculateBirthDayNumber(data.birthDate)\n    const personalYear = this.calculatePersonalYear(data.birthDate)\n\n    return {\n      lifePathNumber,\n      destinyNumber,\n      soulUrgeNumber,\n      personalityNumber,\n      birthDayNumber,\n      personalYear,\n      interpretation: this.generateInterpretation({\n        lifePathNumber,\n        destinyNumber,\n        soulUrgeNumber,\n        personalityNumber,\n        birthDayNumber,\n        personalYear\n      })\n    }\n  }\n\n  /**\n   * Calculate Life Path Number from birth date\n   */\n  private calculateLifePathNumber(birthDate: Date): number {\n    const month = birthDate.getMonth() + 1\n    const day = birthDate.getDate()\n    const year = birthDate.getFullYear()\n\n    // Add all digits together\n    const total = this.sumDigits(month) + this.sumDigits(day) + this.sumDigits(year)\n    \n    // Reduce to single digit (except master numbers 11, 22, 33)\n    return this.reduceToSingleDigit(total)\n  }\n\n  /**\n   * Calculate Destiny Number from full name\n   */\n  private calculateDestinyNumber(fullName: string): number {\n    const total = this.calculateNameValue(fullName)\n    return this.reduceToSingleDigit(total)\n  }\n\n  /**\n   * Calculate Soul Urge Number from vowels in name\n   */\n  private calculateSoulUrgeNumber(fullName: string): number {\n    const vowels = fullName.toLowerCase().match(/[aeiou]/g) || []\n    const total = vowels.reduce((sum, vowel) => sum + this.getLetterValue(vowel), 0)\n    return this.reduceToSingleDigit(total)\n  }\n\n  /**\n   * Calculate Personality Number from consonants in name\n   */\n  private calculatePersonalityNumber(fullName: string): number {\n    const consonants = fullName.toLowerCase().match(/[bcdfghjklmnpqrstvwxyz]/g) || []\n    const total = consonants.reduce((sum, consonant) => sum + this.getLetterValue(consonant), 0)\n    return this.reduceToSingleDigit(total)\n  }\n\n  /**\n   * Calculate Birth Day Number\n   */\n  private calculateBirthDayNumber(birthDate: Date): number {\n    const day = birthDate.getDate()\n    return this.reduceToSingleDigit(day)\n  }\n\n  /**\n   * Calculate Personal Year Number\n   */\n  private calculatePersonalYear(birthDate: Date): number {\n    const currentYear = new Date().getFullYear()\n    const month = birthDate.getMonth() + 1\n    const day = birthDate.getDate()\n    \n    const total = this.sumDigits(month) + this.sumDigits(day) + this.sumDigits(currentYear)\n    return this.reduceToSingleDigit(total)\n  }\n\n  /**\n   * Calculate total value of a name\n   */\n  private calculateNameValue(name: string): number {\n    return name.toLowerCase()\n      .split('')\n      .filter(char => /[a-z]/.test(char))\n      .reduce((sum, char) => sum + this.getLetterValue(char), 0)\n  }\n\n  /**\n   * Get numerical value of a letter (A=1, B=2, etc.)\n   */\n  private getLetterValue(letter: string): number {\n    return letter.charCodeAt(0) - 96 // 'a' = 97, so 'a' = 1\n  }\n\n  /**\n   * Sum all digits in a number\n   */\n  private sumDigits(num: number): number {\n    return num.toString()\n      .split('')\n      .reduce((sum, digit) => sum + parseInt(digit), 0)\n  }\n\n  /**\n   * Reduce number to single digit (preserve master numbers)\n   */\n  private reduceToSingleDigit(num: number): number {\n    // Master numbers - don't reduce\n    if (num === 11 || num === 22 || num === 33) {\n      return num\n    }\n\n    while (num > 9) {\n      num = this.sumDigits(num)\n      // Check for master numbers after reduction\n      if (num === 11 || num === 22 || num === 33) {\n        return num\n      }\n    }\n\n    return num\n  }\n\n  /**\n   * Generate interpretation for numerology results\n   */\n  private generateInterpretation(results: Omit<NumerologyResults, 'interpretation'>) {\n    const interpretations = {\n      lifePath: this.getLifePathInterpretation(results.lifePathNumber),\n      destiny: this.getDestinyInterpretation(results.destinyNumber),\n      soulUrge: this.getSoulUrgeInterpretation(results.soulUrgeNumber),\n      personality: this.getPersonalityInterpretation(results.personalityNumber),\n      strengths: this.getStrengths(results.lifePathNumber),\n      challenges: this.getChallenges(results.lifePathNumber),\n      luckyNumbers: this.getLuckyNumbers(results.lifePathNumber, results.destinyNumber)\n    }\n\n    return interpretations\n  }\n\n  /**\n   * Get Life Path Number interpretation\n   */\n  private getLifePathInterpretation(number: number): string {\n    const interpretations: Record<number, string> = {\n      1: \"You are a natural leader with strong independence and pioneering spirit. Your path involves learning to lead while maintaining humility.\",\n      2: \"You are a natural peacemaker and diplomat. Your path involves learning cooperation, patience, and how to work harmoniously with others.\",\n      3: \"You are creative, expressive, and optimistic. Your path involves developing your artistic talents and learning to communicate effectively.\",\n      4: \"You are practical, hardworking, and reliable. Your path involves building solid foundations and learning the value of patience and persistence.\",\n      5: \"You are adventurous, freedom-loving, and versatile. Your path involves learning to balance freedom with responsibility.\",\n      6: \"You are nurturing, responsible, and family-oriented. Your path involves learning to care for others while maintaining healthy boundaries.\",\n      7: \"You are analytical, spiritual, and introspective. Your path involves developing your intuition and seeking deeper truths.\",\n      8: \"You are ambitious, business-minded, and goal-oriented. Your path involves learning to balance material success with spiritual values.\",\n      9: \"You are humanitarian, generous, and wise. Your path involves learning to serve others and let go of what no longer serves you.\",\n      11: \"You are intuitive, inspirational, and spiritually aware. Your master number path involves developing your psychic abilities and inspiring others.\",\n      22: \"You are a master builder with the ability to turn dreams into reality. Your path involves creating something lasting that benefits humanity.\",\n      33: \"You are a master teacher and healer. Your path involves using your gifts to uplift and heal others on a large scale.\"\n    }\n\n    return interpretations[number] || \"Your unique number carries special significance in your spiritual journey.\"\n  }\n\n  /**\n   * Get Destiny Number interpretation\n   */\n  private getDestinyInterpretation(number: number): string {\n    const interpretations: Record<number, string> = {\n      1: \"Your destiny is to be a leader and pioneer, breaking new ground and inspiring others to follow.\",\n      2: \"Your destiny is to be a peacemaker and collaborator, bringing harmony and cooperation to all situations.\",\n      3: \"Your destiny is to be a creative communicator, inspiring others through art, writing, or speaking.\",\n      4: \"Your destiny is to be a builder and organizer, creating stable foundations for yourself and others.\",\n      5: \"Your destiny is to be an adventurer and freedom fighter, promoting progress and positive change.\",\n      6: \"Your destiny is to be a nurturer and healer, caring for family and community with love and compassion.\",\n      7: \"Your destiny is to be a seeker of truth and wisdom, developing spiritual understanding and sharing insights.\",\n      8: \"Your destiny is to be a material success and leader in business, balancing power with responsibility.\",\n      9: \"Your destiny is to be a humanitarian and teacher, serving others and contributing to the greater good.\",\n      11: \"Your destiny is to be an inspirational leader, using your intuitive gifts to guide and uplift others.\",\n      22: \"Your destiny is to be a master builder, creating lasting structures that benefit humanity.\",\n      33: \"Your destiny is to be a master teacher and healer, serving as a spiritual guide for many.\"\n    }\n\n    return interpretations[number] || \"Your destiny involves a unique path of service and growth.\"\n  }\n\n  /**\n   * Get Soul Urge Number interpretation\n   */\n  private getSoulUrgeInterpretation(number: number): string {\n    const interpretations: Record<number, string> = {\n      1: \"Your soul craves independence, leadership, and the freedom to pursue your own path.\",\n      2: \"Your soul craves harmony, partnership, and peaceful cooperation with others.\",\n      3: \"Your soul craves creative expression, joy, and the ability to inspire others through your talents.\",\n      4: \"Your soul craves stability, order, and the satisfaction of building something lasting.\",\n      5: \"Your soul craves freedom, adventure, and the excitement of new experiences.\",\n      6: \"Your soul craves love, family, and the opportunity to nurture and care for others.\",\n      7: \"Your soul craves knowledge, spiritual understanding, and time for quiet contemplation.\",\n      8: \"Your soul craves material success, recognition, and the power to make a significant impact.\",\n      9: \"Your soul craves the opportunity to serve humanity and make the world a better place.\",\n      11: \"Your soul craves spiritual enlightenment and the chance to inspire others through your intuitive gifts.\",\n      22: \"Your soul craves the opportunity to build something magnificent that will benefit many people.\",\n      33: \"Your soul craves the chance to heal and teach others, serving as a beacon of love and wisdom.\"\n    }\n\n    return interpretations[number] || \"Your soul has unique desires that guide your spiritual journey.\"\n  }\n\n  /**\n   * Get Personality Number interpretation\n   */\n  private getPersonalityInterpretation(number: number): string {\n    const interpretations: Record<number, string> = {\n      1: \"Others see you as confident, independent, and a natural leader who takes charge of situations.\",\n      2: \"Others see you as gentle, diplomatic, and someone who brings peace and harmony to any group.\",\n      3: \"Others see you as creative, charming, and entertaining - someone who lights up any room.\",\n      4: \"Others see you as reliable, practical, and trustworthy - someone they can always count on.\",\n      5: \"Others see you as adventurous, exciting, and unpredictable - someone who brings energy and change.\",\n      6: \"Others see you as caring, responsible, and nurturing - someone who takes care of everyone.\",\n      7: \"Others see you as mysterious, wise, and introspective - someone with hidden depths.\",\n      8: \"Others see you as successful, ambitious, and powerful - someone who gets things done.\",\n      9: \"Others see you as generous, wise, and compassionate - someone who cares about making a difference.\",\n      11: \"Others see you as intuitive, inspiring, and spiritually aware - someone with special gifts.\",\n      22: \"Others see you as capable of great things, a visionary who can turn dreams into reality.\",\n      33: \"Others see you as a natural healer and teacher, someone with profound wisdom and compassion.\"\n    }\n\n    return interpretations[number] || \"Others see you as someone with unique and special qualities.\"\n  }\n\n  /**\n   * Get strengths based on life path number\n   */\n  private getStrengths(lifePathNumber: number): string[] {\n    const strengths: Record<number, string[]> = {\n      1: ['Leadership', 'Independence', 'Innovation', 'Determination'],\n      2: ['Cooperation', 'Diplomacy', 'Sensitivity', 'Patience'],\n      3: ['Creativity', 'Communication', 'Optimism', 'Inspiration'],\n      4: ['Reliability', 'Organization', 'Hard work', 'Practicality'],\n      5: ['Adaptability', 'Freedom', 'Curiosity', 'Versatility'],\n      6: ['Nurturing', 'Responsibility', 'Compassion', 'Healing'],\n      7: ['Analysis', 'Intuition', 'Spirituality', 'Wisdom'],\n      8: ['Ambition', 'Business sense', 'Material success', 'Leadership'],\n      9: ['Humanitarianism', 'Generosity', 'Wisdom', 'Completion'],\n      11: ['Intuition', 'Inspiration', 'Spiritual awareness', 'Psychic abilities'],\n      22: ['Master building', 'Visionary thinking', 'Practical idealism', 'Large-scale impact'],\n      33: ['Master teaching', 'Healing abilities', 'Unconditional love', 'Spiritual guidance']\n    }\n\n    return strengths[lifePathNumber] || ['Unique gifts', 'Special talents', 'Individual strengths']\n  }\n\n  /**\n   * Get challenges based on life path number\n   */\n  private getChallenges(lifePathNumber: number): string[] {\n    const challenges: Record<number, string[]> = {\n      1: ['Ego', 'Impatience', 'Selfishness', 'Domination'],\n      2: ['Over-sensitivity', 'Indecision', 'Dependency', 'Shyness'],\n      3: ['Scattered energy', 'Superficiality', 'Criticism sensitivity', 'Mood swings'],\n      4: ['Rigidity', 'Stubbornness', 'Narrow-mindedness', 'Workaholism'],\n      5: ['Restlessness', 'Irresponsibility', 'Inconsistency', 'Addiction tendencies'],\n      6: ['Perfectionism', 'Martyrdom', 'Interference', 'Worry'],\n      7: ['Isolation', 'Skepticism', 'Coldness', 'Analysis paralysis'],\n      8: ['Materialism', 'Workaholism', 'Ruthlessness', 'Impatience'],\n      9: ['Emotional volatility', 'Impracticality', 'Martyrdom', 'Resentment'],\n      11: ['Nervous tension', 'Impracticality', 'Extremism', 'Self-doubt'],\n      22: ['Nervous tension', 'Impracticality', 'Self-doubt', 'Overwhelming responsibility'],\n      33: ['Emotional overwhelm', 'Martyrdom', 'Perfectionism', 'Burnout']\n    }\n\n    return challenges[lifePathNumber] || ['Personal growth areas', 'Learning opportunities']\n  }\n\n  /**\n   * Get lucky numbers\n   */\n  private getLuckyNumbers(lifePathNumber: number, destinyNumber: number): number[] {\n    const base = [lifePathNumber, destinyNumber]\n    const additional = [\n      (lifePathNumber + destinyNumber) % 9 || 9,\n      (lifePathNumber * 2) % 9 || 9,\n      (destinyNumber * 2) % 9 || 9\n    ]\n    \n    return [...new Set([...base, ...additional])].sort((a, b) => a - b)\n  }\n}\n\n// Export singleton instance\nexport const numerologyCalculator = NumerologyCalculator.getInstance()"